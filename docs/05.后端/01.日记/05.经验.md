时间: 2022-07-12

## 1.跳转和返回同一个路由,页面不刷新

### 1.1.跳转同一个路由,页面不刷新

解决办法,在app.Vue 重新渲染节点,通过vueX

```js
<router-view v-if="!$store.state.user.loading" />
```

在组件页面控制渲染

```javascript
/**
 * 跳转科普详情
 */
toCoupeDetail(id) {
  this.$router.push({
    name: 'frontCoupeDetail',
    query: {
      id: id
    }
  })
  this.$store.state.user.loading = true
  this.$nextTick(
    () => {
      document.body.scrollTop = 0 // firefox
      document.documentElement.scrollTop = 0 // safari
      window.pageYOffset = 0
      this.$store.state.user.loading = false
    }
  )
},
```

### 1.2返回不刷新

解决方法:监听watch路由

```js
watch: {
  $route(to, from) {
    if (this.$route.query.id) {
      this.getCoupeDetail(this.$route.query.id)
      this.getLike()
    }
  },
```



## 2.js里面$route undefined

```js
const route = router.history.current //重新配置route
```



## 3.for..in和for...of的区别

推荐在循环对象属性的时候使用 for...in，在遍历数组的时候的时候使用 for...of 
2、for...in 循环出的是 key，for...of 循环出的是 value 
3、注意，for...of 是 ES6 新引入的特性。修复了 ES5 引入的 for...in 的不足 
4、for...of 不能循环普通的对象（如通过构造函数创造的），需要通过和 Object.keys()搭配使用